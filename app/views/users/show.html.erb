<div class="user-page-wrapper">
    <div></div>

    <div>
        <div class="user-badge">
            <%= image_tag @user.avatar, class: 'hover-shadow' %>
            
            <div class="flexbox flex-column">
                <h2><%= @user.full_name %> <% if @user.username != '' %><span>(<%= @user.username %>)</span><% end %></h2>
                <p><%= pluralize @user.friends.count, 'friend' %></p>
            </div>

            <%= render 'profile_action_btn', is_self: @is_self,
                                             profile_action_data: @profile_action_data,
                                             friend_request_status: @friend_request_status 
            %>
        </div>

        <hr>

        <div data-controller="tabs">
            <div class="tabs is-centered is-small is-fullwidth">
                <ul>
                    <li class="is-active"><a data-tabs-target="tabButton" data-action="tabs#changeTab"
                        data-container-id="posts-section-container">Posts</a></li>
                    <li><a data-tabs-target="tabButton" data-action="tabs#changeTab"
                        data-container-id="about-section-container">About</a></li>
                    <li><a data-tabs-target="tabButton" data-action="tabs#changeTab"
                        data-container-id="friends-section-container">Friends</a></li>
                </ul>
            </div>

            <div id="posts-section-container" data-tabs-target="tabContainer">
                <%= render 'posts/post_create_card' if @user == current_user %>

                <div id="posts">
                    <%= render(partial: "posts/post", collection: @user.posts) || 'User has no posts.' %>
                </div>
            </div>

            <div id="about-section-container" data-tabs-target="tabContainer" hidden>                
                <div class="card">
                    <h2 style="font-weight: 500; font-size: 1.4em;">About</h2>

                    <div>
                        <p>First name: <strong><%= @user.first_name %></strong></p>
                    </div>
                    
                    <div>
                        <p>Last name: <strong><%= @user.last_name %></strong></p>
                    </div>

                    <div>
                        <p>Username:
                            <% if @user.username.empty? %>
                                <i>No username set</i>
                            <% else %>
                                <strong><%= @user.username.empty? ? 'No username' : @user.username %></strong>
                            <% end %>
                        </p>
                    </div>

                    <div>
                        <p>BIO:<br>
                            <% if @user.bio.empty? %>
                                <i>No BIO available</i>
                            <% else %>
                                <textarea name="" id="" cols="30" rows="10" readonly><%= @user.bio %></textarea>
                            <% end %>
                        </p>
                    </div>
                </div>
            </div>

            <div id="friends-section-container" data-tabs-target="tabContainer" hidden>
                <div class="card full-width">
                    <h2 style="font-weight: 500; font-size: 1.4em; margin-left: 12px; margin-top: 12px;">Friends</h2>

                    <div class="user-friends-wrapper">
                        <%= render(partial: 'friend', collection: @user.friends) || 'User has no friends.' %>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div></div>
</div>
